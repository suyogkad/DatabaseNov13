

/* run */
CREATE OR REPLACE FUNCTION func_avg_rating RETURN NUMBER IS
vn_number_average NUMBER(5);
BEGIN 
    SELECT AVG(rating)
    INTO vn_number_average
    FROM reviews;
RETURN vn_number_average;
END func_avg_rating;
/
SHOW ERRORS;



/* FUNCTION */

CREATE OR REPLACE FUNCTION func_max_rating
RETURN VARCHAR IS
   nameOfMotal VARCHAR2(50); 
BEGIN

SELECT accomodation_name INTO nameOfMotal
FROM accomodations a
WHERE accomodation_id=(SELECT accomodation_id 
			FROM retreat_accomodations ra
			WHERE retreat_setting_id=(
	SELECT (retreat_setting_id) 
     FROM reviews  r
     WHERE rating= (SELECT MAX(rating)
                     FROM reviews rr
                     WHERE r.rating=rr.rating)));
END; 
/





/* FUNCTION RUN */

CREATE OR REPLACE FUNCTION func_total_amount
RETURN NUMBER IS
	total_sum NUMBER(5);
BEGIN
		SELECT SUM(i.invoice.amount) INTO total_sum
     FROM retreats i;
	RETURN total_sum;
END; 
/


/* Run */

CREATE FUNCTION func_number_ho(p_string IN VARCHAR2)
   RETURN INT
IS
   v_new_num NUMBER;
BEGIN
   v_new_num := TO_NUMBER(p_string);
   RETURN 1;
EXCEPTION
WHEN VALUE_ERROR THEN
   RETURN 0;
END func_number_ho;












































/*  FUNCTION -----------------*/




















